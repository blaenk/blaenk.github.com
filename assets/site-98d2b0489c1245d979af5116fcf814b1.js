(function(t){function e(){var e=n(this);return isNaN(e.datetime)||t(this).text(a(e.datetime)),this}function n(e){if(e=t(e),!e.data("timeago")){e.data("timeago",{datetime:s.datetime(e)});var n=t.trim(e.text());!(n.length>0)||s.isTime(e)&&e.attr("title")||e.attr("title",n)}return e.data("timeago")}function a(t){return s.inWords(i(t))}function i(t){return(new Date).getTime()-t.getTime()}t.timeago=function(e){return e instanceof Date?a(e):"string"==typeof e?a(t.timeago.parse(e)):"number"==typeof e?a(new Date(e)):a(t.timeago.datetime(e))};var s=t.timeago;t.extend(t.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(e){function n(n,i){var s=t.isFunction(n)?n(i,e):n,r=a.numbers&&a.numbers[i]||i;return s.replace(/%d/i,r)}var a=this.settings.strings,i=a.prefixAgo,s=a.suffixAgo;this.settings.allowFuture&&0>e&&(i=a.prefixFromNow,s=a.suffixFromNow);var r=Math.abs(e)/1e3,o=r/60,h=o/60,c=h/24,u=c/365,d=45>r&&n(a.seconds,Math.round(r))||90>r&&n(a.minute,1)||45>o&&n(a.minutes,Math.round(o))||90>o&&n(a.hour,1)||24>h&&n(a.hours,Math.round(h))||42>h&&n(a.day,1)||30>c&&n(a.days,Math.round(c))||45>c&&n(a.month,1)||365>c&&n(a.months,Math.round(c/30))||1.5>u&&n(a.year,1)||n(a.years,Math.round(u)),l=void 0===a.wordSeparator?" ":a.wordSeparator;return t.trim([i,d,s].join(l))},parse:function(e){var n=t.trim(e);return n=n.replace(/\.\d+/,""),n=n.replace(/-/,"/").replace(/-/,"/"),n=n.replace(/T/," ").replace(/Z/," UTC"),n=n.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(n)},datetime:function(e){var n=s.isTime(e)?t(e).attr("datetime"):t(e).attr("title");return s.parse(n)},isTime:function(e){return"time"===t(e).get(0).tagName.toLowerCase()}}),t.fn.timeago=function(){var t=this;t.each(e);var n=s.settings;return n.refreshMillis>0&&setInterval(function(){t.each(e)},n.refreshMillis),t},document.createElement("abbr"),document.createElement("time")})(jQuery),$(function(){var t=function(){var t=location.host;$("body").on("click","a",function(e){var n=this.href,a=n.replace(/https?:\/\/([^\/]+)(.*)/,"$1");""==a||a==t||$(this).hasClass("fancybox")||(window.open(n),e.preventDefault())})},e=function(){$(".entry-content").each(function(t){$(this).find("img").each(function(){var t=this.alt;""!=t&&$(this).after('<span class="caption">'+t+"</span>"),$(this).wrap('<a href="'+this.src+'" title="'+t+'"/>')})})};t(),e();var n=$("#mobile-nav");$("html").click(function(){n.find(".on").each(function(){$(this).removeClass("on").next().hide()})}),n.on("click",".menu .button",function(){if($(this).hasClass("on"))$(this).removeClass("on").next().hide();else{var t=$(this).width()+42;$(this).addClass("on").next().show().css({width:t})}}).on("click",".search .button",function(){if($(this).hasClass("on"))$(this).removeClass("on").next().hide().children().children().eq(0).val("");else{var t=n.width()-51;n.children(".menu").children().eq(0).removeClass("on").next().hide(),$(this).addClass("on").next().show().css({width:t}).children().children().eq(0).focus()}}).click(function(t){t.stopPropagation()}),$("time.timeago").timeago();var a=$("#main-nav .main"),i=$(".desk_search"),s=function(){a.removeClass("searching"),i.hide()},r=function(){a.addClass("searching"),i.show().find('input[type="text"]').focus()};$("#search_btn").click(function(){a.hasClass("searching")?s():r()}),$('.desk_search input[type="text"]').keyup(function(t){27==t.keyCode&&s()}),$(".entry-content").find("h1, h2, h3, h4, h5").each(function(){var t=$(this).attr("id"),e=$(this).text();$(this).html("").prepend('<span class="hash">#</span>').append('<a href="#'+t+'">'+e+"</a>")}),$(".collapse").not(function(){return"#"+$(this).attr("id")==window.location.hash}).next(".collapsible").hide(),$(".collapse").click(function(t){t.preventDefault(),$(this).next(".collapsible").slideToggle("fast")})});